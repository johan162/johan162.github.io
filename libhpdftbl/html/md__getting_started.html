<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libhpdftbl: Getting started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libhpdftbl<span id="projectnumber">&#160;1.0.0-beta</span>
   </div>
   <div id="projectbrief">Table construction library for Haru PDF library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__getting_started.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting started </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >In this section we will introduce you to the basic usage of the <code>hpdftbl</code> library. We will start simple and work us all the way to complex tables and exaplin what is happening as we go along.</p>
<p >We will not assume any knowledge of the table library but <b>we will assume that you are familiar with the plain Haru PDF library</b>.</p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md52"></a>
Creating a PDF page infrastructure</h1>
<p >Before we start creating a table we need to setup a plain PDF page with the core HPDF library. The HPDF library has excellent documentation on how to do this and we will use the same simple setup for all our examples. We will create a document in A4 size that have one page. For this we use a few utility functions and our <code>main()</code> will always have the following structure:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line"> </div>
<div class="line">    HPDF_Doc pdf_doc;</div>
<div class="line">    HPDF_Page pdf_page;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (setjmp(env)) {</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    setup_hpdf(&amp;pdf_doc, &amp;pdf_page, TRUE);</div>
<div class="line"> </div>
<div class="line">    create_table_&lt;NAME_OF_EXAMPLE&gt;(pdf_doc, pdf_page);</div>
<div class="line">    </div>
<div class="line">    stroke_pdfdoc(pdf_doc, OUTPUT_FILE);</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
</div><!-- fragment --><p >In the Appendix you can find the full code for the setup and troke function. They are very basic and follows the standard hpdf library methoddology. The <code>setup_hpdf()</code> creates a new document and a A4 page and the <code>stroke_pdfdoc()</code> strokes the document to the given output file.</p>
<p >In the following we will focus only on the <code>create_table_&lt;NAME_OF_EXAMPLE&gt;()</code> function which will use the two parameters <code>pdf_doc</code> and <code>pdf_page</code> to refer to the document and page to construct the table.</p>
<blockquote class="doxtable">
<p >&zwj;In order to make the examples robust and compatible with both Windows and Linux/OSX systems some conditional compile instructions are also used but we will not display them while discussing the basic usage to keep the focus on what matters. </p>
</blockquote>
<p>The full source for all example are available in the <code>examples/</code> directory.</p>
<p >&#160;</p>
<h1><a class="anchor" id="autotoc_md53"></a>
Your first table</h1>
<p >|<a href="../examples/tut_ex01.c"><code>tut_ex01.c</code></a>|</p>
<p >The first example shows the absolute most basic usage. We create a 2x2 table in steps as follows</p>
<p >First we construct a table handle for a 2x2 table</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> num_rows = 2;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> num_cols = 2;</div>
<div class="line"><a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a>(num_rows, num_cols);</div>
<div class="ttc" id="ahpdftbl_8c_html_ab14d35a34e1bf7633e7edcc92a273754"><div class="ttname"><a href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a></div><div class="ttdeci">hpdftbl_t hpdftbl_create(size_t rows, size_t cols)</div><div class="ttdoc">Create a new table with no title.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:586</div></div>
<div class="ttc" id="astructhpdftbl_html"><div class="ttname"><a href="structhpdftbl.html">hpdftbl</a></div><div class="ttdoc">Core table handle.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:271</div></div>
</div><!-- fragment --><p >Here we note that:</p><ul>
<li>The size of the table has to be determined before the table handle is created</li>
<li>Most other table function will refer to this handle and we will always use the varaiable name <code>tbl</code> for this handle</li>
<li>We use <code>size_t</code> instead of <code>int</code> since the table dimension is a size and as such can never be negative. In C it is alwyas good practice to use <code>size_t</code> for positive numeric entities.</li>
</ul>
<p >Once we have the table handle we can start to add content in these cells. For now lets just put a string that indicates the cells position.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 0, NULL, <span class="stringliteral">&quot;Cell 0x0&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 1, NULL, <span class="stringliteral">&quot;Cell 0x1&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 0, NULL, <span class="stringliteral">&quot;Cell 1x0&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 1, NULL, <span class="stringliteral">&quot;Cell 1x1&quot;</span>);</div>
<div class="ttc" id="ahpdftbl_8c_html_a4313487a69cc772e777e29f5917e739c"><div class="ttname"><a href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a></div><div class="ttdeci">int hpdftbl_set_cell(hpdftbl_t t, int r, int c, char *label, char *content)</div><div class="ttdoc">Set content for specific cell.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:920</div></div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;You can ignore the <code>NULL</code> argument for now (it will be explained shortly). </p>
</blockquote>
<p>Here we note that:</p>
<ul>
<li>Cells are refered to starting from the top left cell that is cell (0x0)</li>
</ul>
<p >Now its time to size and position the the table on the page. As a minimum you must specify the <code>x</code> and <code>y</code> position as well as the width of the table. The library is smart enough to automatically figure out the height (but it is also possible to force a larger height than strictly necessary)</p>
<p >The native coordiante system for PDF pages are given as the printing unit of DPI or <em>dots per inch</em>. By default the resolution of a PDF is 72 DPI.</p>
<p >To make it easier to directly set the size and position in centimeters a convenience function <code><a class="el" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00" title="Convert cm to dots using the default resolution (72 DPI)">hpdftbl_cm2dpi()</a></code> can be used.</p>
<p >&gt;For precision positioning it is more accurate to give the position and sizes in dots directly.</p>
<p >In this example we set the size and position in centimeters. We positionin the top left of the table <em>1cm</em> below and <em>1cm</em> to the right of the top left corner of the paper and make the table <em>5cm</em> wide as follows:</p>
<div class="fragment"><div class="line">HPDF_REAL xpos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1);</div>
<div class="line">HPDF_REAL ypos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a> - 1);</div>
<div class="line">HPDF_REAL width = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(5);</div>
<div class="line">HPDF_REAL height = 0;  <span class="comment">// Calculate height automatically</span></div>
<div class="ttc" id="ahpdftbl_8h_html_ac8ef7b15650c2dc4e44a4c2b75359dc2"><div class="ttname"><a href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a></div><div class="ttdeci">#define A4PAGE_HEIGHT_CM</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:98</div></div>
<div class="ttc" id="ahpdftbl_8h_html_ad1b5b1c37e8832f507e65c595a7a2d00"><div class="ttname"><a href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a></div><div class="ttdeci">#define hpdftbl_cm2dpi(c)</div><div class="ttdoc">Convert cm to dots using the default resolution (72 DPI)</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:128</div></div>
</div><!-- fragment --><p >Now, there are several important observations to be made here:</p>
<ul>
<li>The origin of the paper coordinate system is bottom left which is (0,0)</li>
<li>The anchor position by default is the top-left corner of the table (this can be adjusted by calling <code>hpdftbl_set_anchor_top_left(FALSE)</code> function which will make the bottom left the anchor point instead)</li>
<li>We use a predefined constant <code>A4PAGE_HEIGHT_IN_CM</code> to position the table vertically 1 cm from the top of the paper</li>
<li>We let the library calculate the minimum table height automatically (based on the font height used in the table)</li>
</ul>
<p >Now the only thing remaining is to print or stroke the table to the page</p>
<div class="fragment"><div class="line">hpdftbl_stroke(pdf_doc, pdf_page, tbl, xpos, ypos, width, height);</div>
</div><!-- fragment --><p >and we are done!</p>
<p >If we put it all together it will give us the following basic table creation code</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line">create_table_ex01(HPDF_Doc pdf_doc, HPDF_Page pdf_page) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_rows = 2;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_cols = 2;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a>(num_rows, num_cols);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 0, NULL, <span class="stringliteral">&quot;Cell 0x0&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 1, NULL, <span class="stringliteral">&quot;Cell 0x1&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 0, NULL, <span class="stringliteral">&quot;Cell 1x0&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 1, NULL, <span class="stringliteral">&quot;Cell 1x1&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    HPDF_REAL xpos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1);</div>
<div class="line">    HPDF_REAL ypos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a> - 1);</div>
<div class="line">    HPDF_REAL width = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(5);</div>
<div class="line">    HPDF_REAL height = 0;  <span class="comment">// Calculate height automatically</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#ae07ffb136a6e6fd7311afc0acf7cf763">hpdftbl_stroke</a>(pdf_doc, pdf_page, tbl, xpos, ypos, width, height);</div>
<div class="line">}</div>
<div class="ttc" id="ahpdftbl_8c_html_ae07ffb136a6e6fd7311afc0acf7cf763"><div class="ttname"><a href="hpdftbl_8c.html#ae07ffb136a6e6fd7311afc0acf7cf763">hpdftbl_stroke</a></div><div class="ttdeci">int hpdftbl_stroke(HPDF_Doc pdf, const HPDF_Page page, hpdftbl_t t, const HPDF_REAL xpos, const HPDF_REAL ypos, const HPDF_REAL width, HPDF_REAL height)</div><div class="ttdoc">Stroke the table.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:1945</div></div>
</div><!-- fragment --><p> The generated table is shown in <b>Figure 1.</b> (<a href="../examples/tut_ex01.c"><code>tut_ex01.c</code></a>)</p>
<p ><img src="tut_ex01.png" alt="" class="inline" title="Figure 1 - tut_ex01.png"/>    <br  />
 <em><b>Figure 1:</b></em> <em>Your first table.</em></p>
<p >As we explained above the coordinate system is in postscript dots. For precision positioning it might be useful to visualize this grid on the page. By using the <code><a class="el" href="hpdftbl_8h.html#af75cc3044be7037191c1e49f059b2e73">hpdftbl_stroke_grid()</a></code> function such a grid can be displayed on a page to help with positioning. If we add the grid to the page and show the uppper left area of the paper with the grid we can view its positioning in the grid as shown in <b>Figure 2.</b></p>
<p ><img src="tut_ex01grid.png" alt="" class="inline" title="Figure 2 - tut_ex01grid.png"/>    <br  />
 <em><b>Figure 2:</b></em> <em>Your first table in the page coordinate system showing the upper left part of the paper.</em></p>
<p >Since this is an A4 page it will have a height of roughly 841 points or 29.7cm</p>
<h1><a class="anchor" id="autotoc_md54"></a>
Your second table - disconnecting program structure from data</h1>
<p >One drawback of the program in the first example above is that if we want to have a different table size we need to actually change the code since we need one function call to store the data to be displayed in each cell. Wouldn't it be better if we could just suppply an array with the data we want to display?</p>
<p >The function to do just that is</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a224e99bb4ded35c2da3f3ba1646ff7d2">hpdftbl_set_content</a>(<a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl, <span class="keywordtype">char</span> **content)</div>
<div class="ttc" id="ahpdftbl_8c_html_a224e99bb4ded35c2da3f3ba1646ff7d2"><div class="ttname"><a href="hpdftbl_8c.html#a224e99bb4ded35c2da3f3ba1646ff7d2">hpdftbl_set_content</a></div><div class="ttdeci">int hpdftbl_set_content(hpdftbl_t t, char **content)</div><div class="ttdoc">Set the content for the table.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:1320</div></div>
</div><!-- fragment --><p >The content data is a 1-dimensional array of string pointers. Where ecah row is consecutive in the array. For example to create dummy data indicating what array position goes into what cell you could use the following setup:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keywordtype">char</span> **content_t;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup_dummy_data(content_t *content, <span class="keywordtype">size_t</span> rows, <span class="keywordtype">size_t</span> cols) {</div>
<div class="line">    <span class="keywordtype">char</span> buff[255];</div>
<div class="line">    *content = calloc(rows*cols, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line">    <span class="keywordtype">size_t</span> cnt = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> r = 0; r &lt; rows; r++) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> c = 0; c &lt; cols; c++) {</div>
<div class="line">            snprintf(buff, <span class="keyword">sizeof</span>(buff), <span class="stringliteral">&quot;Content %zu&quot;</span>, cnt);</div>
<div class="line">            (*content)[cnt] = strdup(buff);</div>
<div class="line">            cnt++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;<b>Note:</b> <em>We allocate each string dynamically in the dummy-data and since the program is just an illustration and terminates after the page has been created we never bother to free this memory. In a real life scenario this would of course be crucial!</em> </p>
</blockquote>
<p>We could then augment example 01 using this more efficient way to specify data as so:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line">create_table_ex02(HPDF_Doc pdf_doc, HPDF_Page pdf_page) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_rows = 2;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_cols = 2;</div>
<div class="line">    <a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a>(num_rows, num_cols);</div>
<div class="line"> </div>
<div class="line">    content_t content;</div>
<div class="line">    setup_dummy_data(&amp;content, num_rows, num_cols);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a224e99bb4ded35c2da3f3ba1646ff7d2">hpdftbl_set_content</a>(tbl, content);</div>
<div class="line"> </div>
<div class="line">    HPDF_REAL xpos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1);</div>
<div class="line">    HPDF_REAL ypos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a> - 1);</div>
<div class="line">    HPDF_REAL width = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(5);</div>
<div class="line">    HPDF_REAL height = 0;  <span class="comment">// Calculate height automatically</span></div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#ae07ffb136a6e6fd7311afc0acf7cf763">hpdftbl_stroke</a>(pdf_doc, pdf_page, tbl, xpos, ypos, width, height);</div>
<div class="line">}</div>
</div><!-- fragment --><p> |<a href="../examples/tut_ex02.c"><code>tut_ex02.c</code></a>|</p>
<p >Running the code above in our infrastructure will give</p>
<p ><img src="tut_ex02.png" alt="" class="inline" title="Figure 3 - tut_ex02.png"/>    <br  />
 <em><b>Figure 3:</b></em> *Specifying data in a table with an array of string pointers.(<a href="../examples/tut_ex02.c"><code>tut_ex02.c</code></a>)*</p>
<p >In the above (small) example it might not have been a big safe but if you have a table with 20x10 rows * cols then you will soon appreciate this way of specifying data.</p>
<p >There is even one more way of specifying data that in some situations are more effiecient and allows a clear division between the table structure and look&amp;feel and its data. This more efficient way is achieved by using cell callbacks either directly in individual cells or in one go by specifying the entire table as a data structure by using the <code><a class="el" href="hpdftbl_8c.html#ae606b38b3769692e75eba490964216c9" title="Construct the table from a array specification.">hpdftbl_stroke_from_data()</a></code> function. This will be decribed later when we discuss how to use callback functions.</p>
<p >But now it is time to explain the <code>NULL</code> value in the first example when we specified the content with the <code><a class="el" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c" title="Set content for specific cell.">hpdftbl_set_cell()</a></code> function.</p>
<h1><a class="anchor" id="autotoc_md55"></a>
Adding a header row</h1>
<p >While it is possible (as discussed in section ??) to manually adjust the font, size, style, background etc. on each cell individually there is a convinient shortcut to create a basic table with a header using the <code><a class="el" href="hpdftbl_8c.html#af0b3ef1634a1dd01dec3e052d7cdf3c5">hpdftbl_use_header()</a></code> function. By modifying the code above and add this line we get the following code and resulting table</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line">create_table_ex11(HPDF_Doc pdf_doc, HPDF_Page pdf_page) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_rows = 4;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_cols = 4;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a>(num_rows, num_cols);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#af0b3ef1634a1dd01dec3e052d7cdf3c5">hpdftbl_use_header</a>(tbl, TRUE);</div>
<div class="line"> </div>
<div class="line">    content_t content;</div>
<div class="line">    setup_dummy_data(&amp;content, num_rows, num_cols);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a224e99bb4ded35c2da3f3ba1646ff7d2">hpdftbl_set_content</a>(tbl, content);</div>
<div class="line"> </div>
<div class="line">    HPDF_REAL xpos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1);</div>
<div class="line">    HPDF_REAL ypos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a> - 1);</div>
<div class="line">    HPDF_REAL width = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#a74d6a937e9d5494f2fcf4b12783b7521">A4PAGE_WIDTH_CM</a> - 5);</div>
<div class="line">    HPDF_REAL height = 0;  <span class="comment">// Calculate height automatically</span></div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#ae07ffb136a6e6fd7311afc0acf7cf763">hpdftbl_stroke</a>(pdf_doc, pdf_page, tbl, xpos, ypos, width, height);</div>
<div class="line">}</div>
<div class="ttc" id="ahpdftbl_8c_html_af0b3ef1634a1dd01dec3e052d7cdf3c5"><div class="ttname"><a href="hpdftbl_8c.html#af0b3ef1634a1dd01dec3e052d7cdf3c5">hpdftbl_use_header</a></div><div class="ttdeci">int hpdftbl_use_header(hpdftbl_t t, _Bool use)</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:787</div></div>
<div class="ttc" id="ahpdftbl_8h_html_a74d6a937e9d5494f2fcf4b12783b7521"><div class="ttname"><a href="hpdftbl_8h.html#a74d6a937e9d5494f2fcf4b12783b7521">A4PAGE_WIDTH_CM</a></div><div class="ttdeci">#define A4PAGE_WIDTH_CM</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:99</div></div>
</div><!-- fragment --><p >The resulting table can be seen in <b>Figure 4</b>. We also modified the dummy data to have the work "Header" in the first row (for details see <a href="../examples/tut_ex02_1.c"><code>tut_ex02_1.c</code></a>)</p>
<p ><img src="tut_ex02_1.png" alt="" class="inline" title="Figure 4 - tut_ex02_1.png"/>    <br  />
 <em><b>Figure 4:</b></em> *Adding automatic header formatted row (<a href="../examples/tut_ex02_1.c"><code>tut_ex02_1.c</code></a>)*</p>
<h1><a class="anchor" id="autotoc_md56"></a>
Using labels in the table cells</h1>
<p >A variant of a table is to present data with a short label describing what kind of data is displayed. This is often used when a table is used to present a dataform. An example of this is shown in <b>Figure 4.</b> below.</p>
<p ><img src="tut_ex03.png" alt="" class="inline" title="Figure 4 - tut_ex03.png"/>    <br  />
 <em><b>Figure 4:</b></em> *Specifying labels for each cell. (<a href="../examples/tut_ex03.c"><code>tut_ex03.c</code></a>)*</p>
<p >Adding labels requires three things:</p>
<ol type="1">
<li>Enable the "label" feature with a call to <code>hpdftbl_use_labels(tbl, TRUE);</code></li>
<li><p class="startli">Add the text that should be the label. Specifying these labels can either be done using the <code><a class="el" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c" title="Set content for specific cell.">hpdftbl_set_cell()</a></code> function as in</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 0, <span class="stringliteral">&quot;Label 1&quot;</span>, <span class="stringliteral">&quot;Cell 0x0&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 0, 1, <span class="stringliteral">&quot;Label 2&quot;</span>, <span class="stringliteral">&quot;Cell 0x1&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 0, <span class="stringliteral">&quot;Label 3&quot;</span>, <span class="stringliteral">&quot;Cell 1x0&quot;</span>);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4313487a69cc772e777e29f5917e739c">hpdftbl_set_cell</a>(tbl, 1, 1, <span class="stringliteral">&quot;Label 4&quot;</span>, <span class="stringliteral">&quot;Cell 1x1&quot;</span>);</div>
</div><!-- fragment --><p> or it can be done using the analog of specifying the labels in an array using the function <code><a class="el" href="hpdftbl_8c.html#aa578af688050ac485bf01c5d12d8bccc" title="Set the text for the cell labels.">hpdftbl_set_labels()</a></code>.</p>
</li>
<li>In addition there is one more key setting and that is whether the left cell border should be the whole cell or just the lable height as was shown in <b>Figure 4.</b> above. This option is specified with <code><a class="el" href="hpdftbl_8c.html#a4a339735a5dae90e6349fddf6c14d152">hpdftbl_use_labelgrid()</a></code>. By defaullt the left border is from top to bottom. The differenceies between the two variants is shown in <b>Figure 5.</b> below. <br  />
 <img src="labelGrid_TF_small.png" alt="" class="inline" title="Figure 5 - tut_ex03.png"/>    <br  />
 <em><b>Figure 5:</b></em> <em>The two variants of left cell border with labels.</em></li>
</ol>
<p >Except for the simplest of tables both the table content and the labels should be specified in an array.</p>
<p >We therefore start by amending our dummy data creation function to also create the data for the labels. It will now look like this:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keywordtype">char</span> **content_t;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> </div>
<div class="line">setup_dummy_data(content_t *content, content_t *labels, </div>
<div class="line">                 <span class="keywordtype">size_t</span> rows, <span class="keywordtype">size_t</span> cols) {</div>
<div class="line">    <span class="keywordtype">char</span> buff[255];</div>
<div class="line">    *content = calloc(rows*cols, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line">    *labels = calloc(rows*cols, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line">    <span class="keywordtype">size_t</span> cnt = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> r = 0; r &lt; rows; r++) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> c = 0; c &lt; cols; c++) {</div>
<div class="line">            snprintf(buff, <span class="keyword">sizeof</span>(buff), <span class="stringliteral">&quot;Content %zu&quot;</span>, cnt);</div>
<div class="line">            (*content)[cnt] = strdup(buff);</div>
<div class="line">            snprintf(buff, <span class="keyword">sizeof</span>(buff), <span class="stringliteral">&quot;Label %zu&quot;</span>, cnt);</div>
<div class="line">            (*labels)[cnt] = strdup(buff);</div>
<div class="line">            cnt++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p >In the same way as before we call the functions to specify both the content and the labels</p>
<div class="fragment"><div class="line">setup_dummy_data(&amp;content, &amp;labels, num_rows, num_cols);</div>
<div class="line">hpdftbl_set_content(tbl, content);</div>
<div class="line">hpdftbl_set_labels(tbl, labels);</div>
</div><!-- fragment --><p >and finally we also enable labels and the short variant of the left cell border</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a5f4278417bc42a09aabfca973dbd31ba">hpdftbl_use_labels</a>(tbl, TRUE);</div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#a4a339735a5dae90e6349fddf6c14d152">hpdftbl_use_labelgrid</a>(tbl, TRUE);</div>
<div class="ttc" id="ahpdftbl_8c_html_a4a339735a5dae90e6349fddf6c14d152"><div class="ttname"><a href="hpdftbl_8c.html#a4a339735a5dae90e6349fddf6c14d152">hpdftbl_use_labelgrid</a></div><div class="ttdeci">int hpdftbl_use_labelgrid(hpdftbl_t t, _Bool use)</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:822</div></div>
<div class="ttc" id="ahpdftbl_8c_html_a5f4278417bc42a09aabfca973dbd31ba"><div class="ttname"><a href="hpdftbl_8c.html#a5f4278417bc42a09aabfca973dbd31ba">hpdftbl_use_labels</a></div><div class="ttdeci">int hpdftbl_use_labels(hpdftbl_t t, _Bool use)</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:804</div></div>
</div><!-- fragment --><p >the remaining code we can leave untouched. With this we get the result shown in <b>Figure 4.</b> with the full code for the table shown below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line">create_table_ex04(HPDF_Doc pdf_doc, HPDF_Page pdf_page) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_rows = 2;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_cols = 2;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754">hpdftbl_create</a>(num_rows, num_cols);</div>
<div class="line">    content_t content, labels;</div>
<div class="line"> </div>
<div class="line">    setup_dummy_data(&amp;content, &amp;labels, num_rows, num_cols);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a224e99bb4ded35c2da3f3ba1646ff7d2">hpdftbl_set_content</a>(tbl, content);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#aa578af688050ac485bf01c5d12d8bccc">hpdftbl_set_labels</a>(tbl, labels);</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a5f4278417bc42a09aabfca973dbd31ba">hpdftbl_use_labels</a>(tbl, TRUE);</div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#a4a339735a5dae90e6349fddf6c14d152">hpdftbl_use_labelgrid</a>(tbl, TRUE);</div>
<div class="line"> </div>
<div class="line">    HPDF_REAL xpos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1);</div>
<div class="line">    HPDF_REAL ypos = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a> - 1);</div>
<div class="line">    HPDF_REAL width = <a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(5);</div>
<div class="line">    HPDF_REAL height = 0;  <span class="comment">// Calculate height automatically</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="hpdftbl_8c.html#ae07ffb136a6e6fd7311afc0acf7cf763">hpdftbl_stroke</a>(pdf_doc, pdf_page, tbl, xpos, ypos, width, height);</div>
<div class="line">}</div>
<div class="ttc" id="ahpdftbl_8c_html_aa578af688050ac485bf01c5d12d8bccc"><div class="ttname"><a href="hpdftbl_8c.html#aa578af688050ac485bf01c5d12d8bccc">hpdftbl_set_labels</a></div><div class="ttdeci">int hpdftbl_set_labels(hpdftbl_t t, char **labels)</div><div class="ttdoc">Set the text for the cell labels.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:1285</div></div>
</div><!-- fragment --><p> (<a href="../examples/tut_ex04.c"><code>tut_ex04.c</code></a>)</p>
<h1><a class="anchor" id="autotoc_md57"></a>
Adding a table title</h1>
<p >We have one last part of the table we haven't yet used and that is the table title. In the previous examples we created a table using <code><a class="el" href="hpdftbl_8c.html#ab14d35a34e1bf7633e7edcc92a273754" title="Create a new table with no title.">hpdftbl_create()</a></code> but there is also <code><a class="el" href="hpdftbl_8c.html#aad0f4078a299fcaebde02f16905fe51f" title="Create a new table with title top row.">hpdftbl_create_title()</a></code>. A title can also be added to an existing table (or perhaps updated) using <code><a class="el" href="hpdftbl_8c.html#acda02a218a3499273febac76d8889dfb" title="Set table title.">hpdftbl_set_title()</a></code></p>
<p >To create a table with a title</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *table_title = <span class="stringliteral">&quot;tut_ex05: 2x2 table&quot;</span>;</div>
<div class="line"><a class="code hl_struct" href="structhpdftbl.html">hpdftbl_t</a> tbl = <a class="code hl_function" href="hpdftbl_8c.html#aad0f4078a299fcaebde02f16905fe51f">hpdftbl_create_title</a>(num_rows, num_cols, table_title);</div>
<div class="ttc" id="ahpdftbl_8c_html_aad0f4078a299fcaebde02f16905fe51f"><div class="ttname"><a href="hpdftbl_8c.html#aad0f4078a299fcaebde02f16905fe51f">hpdftbl_create_title</a></div><div class="ttdeci">hpdftbl_t hpdftbl_create_title(size_t rows, size_t cols, char *title)</div><div class="ttdoc">Create a new table with title top row.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:601</div></div>
</div><!-- fragment --><p >A table title occupies the top of the table in it's own row which isn't part of the counting if the normal columns.</p>
<p ><img src="tut_ex05.png" alt="" class="inline" title="Figure 6 - tut_ex04.png"/>    <br  />
 <em><b>Figure 6:</b></em> *Adding a title for the table. (<a href="../examples/tut_ex05.c"><code>tut_ex05.c</code></a>)*</p>
<p >It is possible to adjust the colors, font-properties, and aignments of the title with two additional functions <code><a class="el" href="hpdftbl_8c.html#afe26fd3e305b3168d58e76471fcbe167" title="Set the table title style.">hpdftbl_set_title_style()</a></code> and <code><a class="el" href="hpdftbl_8c.html#ab8cb60e8aa0ba957797b9ed15f0c3241" title="Set horizontal alignment for table title.">hpdftbl_set_title_halign()</a></code></p>
<h1><a class="anchor" id="autotoc_md58"></a>
Adjusting fonts and colors</h1>
<p >The one thing we have skipped over so far and just used the defaults is the look&amp;feel of the table as far as colors and fonts go. It is possible to adjust these setting at several different granularities. It is possible to</p>
<ol type="1">
<li>Adjust the entire table in one go using <code><a class="el" href="hpdftbl_8c.html#a60d5cb61c0461c2459565cac98cf7604" title="Set font style for text content.">hpdftbl_set_content_style()</a></code></li>
<li>Adjust one entire column using <code><a class="el" href="hpdftbl_8c.html#af4e71fc83643c8a867ddbf63097cbfbd" title="Set the font style for an entre column of cells.">hpdftbl_set_col_content_style()</a></code></li>
</ol>
<ol type="1">
<li>Adjust one entire row in using <code><a class="el" href="hpdftbl_8c.html#abbf178ee835bf23800334c0e34964511" title="Set the font style for an entire row of cells.">hpdftbl_set_row_content_style()</a></code></li>
</ol>
<ol type="1">
<li>Adjust individual cells using <code><a class="el" href="hpdftbl_8c.html#a60d5cb61c0461c2459565cac98cf7604" title="Set font style for text content.">hpdftbl_set_content_style()</a></code></li>
</ol>
<p >It is also possible to adjust the color and thickness of the borders but we will not discuss this more here and instead refer the reader to the API documentation.</p>
<blockquote class="doxtable">
<p >&zwj;We should also mention that there is a concept of a look&amp;feel theme for the table which can be used to adjust all the parameters at once. This is discussed in "Using themes". </p>
</blockquote>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Apr 25 2022 06:41:42 for libhpdftbl by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
