<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libhpdftbl: Tables layout from data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libhpdftbl<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Table construction library for Haru PDF library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__tables_from_data.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tables layout from data </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >So far we have constructed the layout of table by issuing API calls per table to setup, for example, the column widths and what cells should merge with what other cells and so on. Previously we saw that data to be put in the table could be specified by either directly issuing API calls per cell, using a 2D array that we populate with data and then finally use callbacks to generate the data in the cells.</p>
<p >The final and most powerful way of constructing a table is to define the table structure as data. This <em>structural data</em> together with a style theme can completely define a table.</p>
<p >This will allow the dynamic construction of tables with only one API call insted of the multiple call required to construct a table the usual way. It can initially seem more complex but for advanced table this is indeed a much simpler and easy to maintain. In fact, this will allow a table to bed defined entirely in a database and makes it possible to adjust tha table as the data changes without ever updating the code (or recompile).</p>
<h1><a class="anchor" id="autotoc_md66"></a>
Defining a table in data</h1>
<p >There are two data structure that are used when defining a table. First there is a data structure for the overall table specifics and then in that structure a structure to specify the layout of each cell. In addition, a theme needs to be defined (see section on <a class="el" href="ch_styleandfontsetting.html#sec_themes">Themes</a>). It is possible to omit the theme by specifying <code>NULL</code> in which case the default theme will be used.</p>
<p >To stroke a table from data the following API call is used</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span></div>
<div class="line"><a class="code hl_function" href="hpdftbl_8c.html#ae606b38b3769692e75eba490964216c9">hpdftbl_stroke_from_data</a>(HPDF_Doc pdf_doc, HPDF_Page pdf_page, <a class="code hl_struct" href="structhpdftbl__spec.html">hpdftbl_spec_t</a> tbl_spec, <a class="code hl_struct" href="structhpdftbl__theme.html">hpdftbl_theme_t</a> *theme);</div>
<div class="ttc" id="ahpdftbl_8c_html_ae606b38b3769692e75eba490964216c9"><div class="ttname"><a href="hpdftbl_8c.html#ae606b38b3769692e75eba490964216c9">hpdftbl_stroke_from_data</a></div><div class="ttdeci">int hpdftbl_stroke_from_data(HPDF_Doc pdf_doc, HPDF_Page pdf_page, hpdftbl_spec_t *tbl_spec, hpdftbl_theme_t *theme)</div><div class="ttdoc">Construct the table from a array specification.</div><div class="ttdef"><b>Definition:</b> hpdftbl.c:1552</div></div>
<div class="ttc" id="astructhpdftbl__spec_html"><div class="ttname"><a href="structhpdftbl__spec.html">hpdftbl_spec</a></div><div class="ttdoc">Used in data driven table creation.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:475</div></div>
<div class="ttc" id="astructhpdftbl__theme_html"><div class="ttname"><a href="structhpdftbl__theme.html">hpdftbl_theme</a></div><div class="ttdoc">Define a set of styles into a table theme.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:517</div></div>
</div><!-- fragment --><p >In order to populate the table with suitable data callback functions are used (as described in section ??)</p>
<p >The overall table is first defined as an instance of</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structhpdftbl__spec.html">hpdftbl_spec</a> {</div>
<div class="line">    <span class="keywordtype">char</span> *<a class="code hl_variable" href="structhpdftbl__spec.html#af06d911bb9e05f491ef3da520d03796c">title</a>;</div>
<div class="line">    _Bool <a class="code hl_variable" href="structhpdftbl__spec.html#ac5c0bf7f08ef02a570f5b8c4296e634b">use_header</a>;</div>
<div class="line">    _Bool <a class="code hl_variable" href="structhpdftbl__spec.html#aa56fbcd88a785084dbfb191404213598">use_labels</a>;</div>
<div class="line">    _Bool <a class="code hl_variable" href="structhpdftbl__spec.html#a34c84bffcee1f8d45930eca45fa3853b">use_labelgrid</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structhpdftbl__spec.html#ad161320eba27a8b966baac47bee35c46">rows</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structhpdftbl__spec.html#a8bc05371b3a4013263f68932ba1b6452">cols</a>;</div>
<div class="line">    HPDF_REAL <a class="code hl_variable" href="structhpdftbl__spec.html#a75f36b86eeb82a2ba0c2266fe52449dd">xpos</a>;</div>
<div class="line">    HPDF_REAL <a class="code hl_variable" href="structhpdftbl__spec.html#a3c284168bd070eceb2106480e7b9560b">ypos</a>;</div>
<div class="line">    HPDF_REAL <a class="code hl_variable" href="structhpdftbl__spec.html#a4f29c3b2841b17180ba269809503cc9a">width</a>;</div>
<div class="line">    HPDF_REAL <a class="code hl_variable" href="structhpdftbl__spec.html#a64f3448e2733fa528f9de13b7c627d69">height</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a0817d30c0f6977210bc2453a888d8986">hpdftbl_content_callback_t</a> <a class="code hl_variable" href="structhpdftbl__spec.html#a21eb8248d196c3b26ed363c34b41eee1">content_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a0817d30c0f6977210bc2453a888d8986">hpdftbl_content_callback_t</a> <a class="code hl_variable" href="structhpdftbl__spec.html#afa7f611082a18bdef83176786d1e5114">label_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a3d711e82876140fbd564b76c08753343">hpdftbl_content_style_callback_t</a> <a class="code hl_variable" href="structhpdftbl__spec.html#a4e08894bd50b36a946f19bcc92a4ed4f">style_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a205ce6b4703f0a270834fd575e0414e1">hpdftbl_callback_t</a> <a class="code hl_variable" href="structhpdftbl__spec.html#ad34fcf4813cfcd0b648e6aa5d3da430e">post_cb</a>;</div>
<div class="line">    <a class="code hl_struct" href="structhpdftbl__cell__spec.html">hpdftbl_cell_spec_t</a> *<a class="code hl_variable" href="structhpdftbl__spec.html#a91ad84b75208ebdead5bbe9bd6bbddce">cell_spec</a>;</div>
<div class="line">} <a class="code hl_typedef" href="hpdftbl_8h.html#a9f7b00fc28973e60f6f05df1c02b72ed">hpdftbl_spec_t</a>;</div>
<div class="ttc" id="ahpdftbl_8h_html_a0817d30c0f6977210bc2453a888d8986"><div class="ttname"><a href="hpdftbl_8h.html#a0817d30c0f6977210bc2453a888d8986">hpdftbl_content_callback_t</a></div><div class="ttdeci">char *(* hpdftbl_content_callback_t)(void *, size_t, size_t)</div><div class="ttdoc">Type specification for the table content callback.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:237</div></div>
<div class="ttc" id="ahpdftbl_8h_html_a205ce6b4703f0a270834fd575e0414e1"><div class="ttname"><a href="hpdftbl_8h.html#a205ce6b4703f0a270834fd575e0414e1">hpdftbl_callback_t</a></div><div class="ttdeci">void(* hpdftbl_callback_t)(hpdftbl_t)</div><div class="ttdoc">Callback type for optional post processing when constructing table from a data array.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:437</div></div>
<div class="ttc" id="ahpdftbl_8h_html_a3d711e82876140fbd564b76c08753343"><div class="ttname"><a href="hpdftbl_8h.html#a3d711e82876140fbd564b76c08753343">hpdftbl_content_style_callback_t</a></div><div class="ttdeci">_Bool(* hpdftbl_content_style_callback_t)(void *, size_t, size_t, char *content, hpdf_text_style_t *)</div><div class="ttdoc">Type specification for the content style.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:260</div></div>
<div class="ttc" id="ahpdftbl_8h_html_a9f7b00fc28973e60f6f05df1c02b72ed"><div class="ttname"><a href="hpdftbl_8h.html#a9f7b00fc28973e60f6f05df1c02b72ed">hpdftbl_spec_t</a></div><div class="ttdeci">struct hpdftbl_spec hpdftbl_spec_t</div><div class="ttdoc">Used in data driven table creation.</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html"><div class="ttname"><a href="structhpdftbl__cell__spec.html">hpdftbl_cell_spec</a></div><div class="ttdoc">Used in data driven table creation.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:448</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a21eb8248d196c3b26ed363c34b41eee1"><div class="ttname"><a href="structhpdftbl__spec.html#a21eb8248d196c3b26ed363c34b41eee1">hpdftbl_spec::content_cb</a></div><div class="ttdeci">hpdftbl_content_callback_t content_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:497</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a34c84bffcee1f8d45930eca45fa3853b"><div class="ttname"><a href="structhpdftbl__spec.html#a34c84bffcee1f8d45930eca45fa3853b">hpdftbl_spec::use_labelgrid</a></div><div class="ttdeci">_Bool use_labelgrid</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:483</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a3c284168bd070eceb2106480e7b9560b"><div class="ttname"><a href="structhpdftbl__spec.html#a3c284168bd070eceb2106480e7b9560b">hpdftbl_spec::ypos</a></div><div class="ttdeci">HPDF_REAL ypos</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:491</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a4e08894bd50b36a946f19bcc92a4ed4f"><div class="ttname"><a href="structhpdftbl__spec.html#a4e08894bd50b36a946f19bcc92a4ed4f">hpdftbl_spec::style_cb</a></div><div class="ttdeci">hpdftbl_content_style_callback_t style_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:501</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a4f29c3b2841b17180ba269809503cc9a"><div class="ttname"><a href="structhpdftbl__spec.html#a4f29c3b2841b17180ba269809503cc9a">hpdftbl_spec::width</a></div><div class="ttdeci">HPDF_REAL width</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:493</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a64f3448e2733fa528f9de13b7c627d69"><div class="ttname"><a href="structhpdftbl__spec.html#a64f3448e2733fa528f9de13b7c627d69">hpdftbl_spec::height</a></div><div class="ttdeci">HPDF_REAL height</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:495</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a75f36b86eeb82a2ba0c2266fe52449dd"><div class="ttname"><a href="structhpdftbl__spec.html#a75f36b86eeb82a2ba0c2266fe52449dd">hpdftbl_spec::xpos</a></div><div class="ttdeci">HPDF_REAL xpos</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:489</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a8bc05371b3a4013263f68932ba1b6452"><div class="ttname"><a href="structhpdftbl__spec.html#a8bc05371b3a4013263f68932ba1b6452">hpdftbl_spec::cols</a></div><div class="ttdeci">size_t cols</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:487</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_a91ad84b75208ebdead5bbe9bd6bbddce"><div class="ttname"><a href="structhpdftbl__spec.html#a91ad84b75208ebdead5bbe9bd6bbddce">hpdftbl_spec::cell_spec</a></div><div class="ttdeci">hpdftbl_cell_spec_t * cell_spec</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:508</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_aa56fbcd88a785084dbfb191404213598"><div class="ttname"><a href="structhpdftbl__spec.html#aa56fbcd88a785084dbfb191404213598">hpdftbl_spec::use_labels</a></div><div class="ttdeci">_Bool use_labels</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:481</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_ac5c0bf7f08ef02a570f5b8c4296e634b"><div class="ttname"><a href="structhpdftbl__spec.html#ac5c0bf7f08ef02a570f5b8c4296e634b">hpdftbl_spec::use_header</a></div><div class="ttdeci">_Bool use_header</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:479</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_ad161320eba27a8b966baac47bee35c46"><div class="ttname"><a href="structhpdftbl__spec.html#ad161320eba27a8b966baac47bee35c46">hpdftbl_spec::rows</a></div><div class="ttdeci">size_t rows</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:485</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_ad34fcf4813cfcd0b648e6aa5d3da430e"><div class="ttname"><a href="structhpdftbl__spec.html#ad34fcf4813cfcd0b648e6aa5d3da430e">hpdftbl_spec::post_cb</a></div><div class="ttdeci">hpdftbl_callback_t post_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:506</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_af06d911bb9e05f491ef3da520d03796c"><div class="ttname"><a href="structhpdftbl__spec.html#af06d911bb9e05f491ef3da520d03796c">hpdftbl_spec::title</a></div><div class="ttdeci">char * title</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:477</div></div>
<div class="ttc" id="astructhpdftbl__spec_html_afa7f611082a18bdef83176786d1e5114"><div class="ttname"><a href="structhpdftbl__spec.html#afa7f611082a18bdef83176786d1e5114">hpdftbl_spec::label_cb</a></div><div class="ttdeci">hpdftbl_content_callback_t label_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:499</div></div>
</div><!-- fragment --><p >Then each cell (referenced above in the <code>cell_spec</code> field) is defined as an instance of</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structhpdftbl__cell__spec.html">hpdftbl_cell_spec</a> {</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#a97ab3b8ef2f074e3774c66099d7ec59b">row</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#a72f49011b5605e0c59eabd1ab811cdfd">col</a>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#a98f685e43777849cf39dfc995321b42a">rowspan</a>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#ae74f1d9590853b94da0728301f50f837">colspan</a>;</div>
<div class="line">    <span class="keywordtype">char</span> *<a class="code hl_variable" href="structhpdftbl__cell__spec.html#acf60de4c64d60c1b9449c056bc6bfcf7">label</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a0817d30c0f6977210bc2453a888d8986">hpdftbl_content_callback_t</a> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#a21eb8248d196c3b26ed363c34b41eee1">content_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a0817d30c0f6977210bc2453a888d8986">hpdftbl_content_callback_t</a> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#afa7f611082a18bdef83176786d1e5114">label_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a3d711e82876140fbd564b76c08753343">hpdftbl_content_style_callback_t</a> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#a4e08894bd50b36a946f19bcc92a4ed4f">style_cb</a>;</div>
<div class="line">    <a class="code hl_typedef" href="hpdftbl_8h.html#a712124f09767b6dca8f28443b77c441a">hpdftbl_canvas_callback_t</a> <a class="code hl_variable" href="structhpdftbl__cell__spec.html#ac0b686f623c6a898f31ae37ee18b803d">canvas_cb</a>;</div>
<div class="line">} <a class="code hl_typedef" href="hpdftbl_8h.html#a67241a3b7589d9f8cfc7a8bf72a29082">hpdftbl_cell_spec_t</a>;</div>
<div class="ttc" id="ahpdftbl_8h_html_a67241a3b7589d9f8cfc7a8bf72a29082"><div class="ttname"><a href="hpdftbl_8h.html#a67241a3b7589d9f8cfc7a8bf72a29082">hpdftbl_cell_spec_t</a></div><div class="ttdeci">struct hpdftbl_cell_spec hpdftbl_cell_spec_t</div><div class="ttdoc">Used in data driven table creation.</div></div>
<div class="ttc" id="ahpdftbl_8h_html_a712124f09767b6dca8f28443b77c441a"><div class="ttname"><a href="hpdftbl_8h.html#a712124f09767b6dca8f28443b77c441a">hpdftbl_canvas_callback_t</a></div><div class="ttdeci">void(* hpdftbl_canvas_callback_t)(HPDF_Doc, HPDF_Page, void *, size_t, size_t, HPDF_REAL, HPDF_REAL, HPDF_REAL, HPDF_REAL)</div><div class="ttdoc">Type specification for the table canvas callback.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:248</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_a21eb8248d196c3b26ed363c34b41eee1"><div class="ttname"><a href="structhpdftbl__cell__spec.html#a21eb8248d196c3b26ed363c34b41eee1">hpdftbl_cell_spec::content_cb</a></div><div class="ttdeci">hpdftbl_content_callback_t content_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:460</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_a4e08894bd50b36a946f19bcc92a4ed4f"><div class="ttname"><a href="structhpdftbl__cell__spec.html#a4e08894bd50b36a946f19bcc92a4ed4f">hpdftbl_cell_spec::style_cb</a></div><div class="ttdeci">hpdftbl_content_style_callback_t style_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:464</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_a72f49011b5605e0c59eabd1ab811cdfd"><div class="ttname"><a href="structhpdftbl__cell__spec.html#a72f49011b5605e0c59eabd1ab811cdfd">hpdftbl_cell_spec::col</a></div><div class="ttdeci">size_t col</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:452</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_a97ab3b8ef2f074e3774c66099d7ec59b"><div class="ttname"><a href="structhpdftbl__cell__spec.html#a97ab3b8ef2f074e3774c66099d7ec59b">hpdftbl_cell_spec::row</a></div><div class="ttdeci">size_t row</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:450</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_a98f685e43777849cf39dfc995321b42a"><div class="ttname"><a href="structhpdftbl__cell__spec.html#a98f685e43777849cf39dfc995321b42a">hpdftbl_cell_spec::rowspan</a></div><div class="ttdeci">unsigned rowspan</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:454</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_ac0b686f623c6a898f31ae37ee18b803d"><div class="ttname"><a href="structhpdftbl__cell__spec.html#ac0b686f623c6a898f31ae37ee18b803d">hpdftbl_cell_spec::canvas_cb</a></div><div class="ttdeci">hpdftbl_canvas_callback_t canvas_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:466</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_acf60de4c64d60c1b9449c056bc6bfcf7"><div class="ttname"><a href="structhpdftbl__cell__spec.html#acf60de4c64d60c1b9449c056bc6bfcf7">hpdftbl_cell_spec::label</a></div><div class="ttdeci">char * label</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:458</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_ae74f1d9590853b94da0728301f50f837"><div class="ttname"><a href="structhpdftbl__cell__spec.html#ae74f1d9590853b94da0728301f50f837">hpdftbl_cell_spec::colspan</a></div><div class="ttdeci">unsigned colspan</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:456</div></div>
<div class="ttc" id="astructhpdftbl__cell__spec_html_afa7f611082a18bdef83176786d1e5114"><div class="ttname"><a href="structhpdftbl__cell__spec.html#afa7f611082a18bdef83176786d1e5114">hpdftbl_cell_spec::label_cb</a></div><div class="ttdeci">hpdftbl_content_callback_t label_cb</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:462</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md67"></a>
A first example of defining table as data</h1>
<p >To understand how this is done lets start to define a basic 3x3 table with header row (so 4x3 in total) as data. First we create an instance of the table data</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structhpdftbl__spec.html">hpdftbl_spec_t</a> tbl_spec = {</div>
<div class="line">        <span class="comment">// Title and header flag</span></div>
<div class="line">        .<a class="code hl_variable" href="structhpdftbl__spec.html#af06d911bb9e05f491ef3da520d03796c">title</a>=NULL, .use_header=<a class="code hl_define" href="hpdftbl_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Label and labelgrid flags</span></div>
<div class="line">        .use_labels=<a class="code hl_define" href="hpdftbl_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, .use_labelgrid=<a class="code hl_define" href="hpdftbl_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Row and columns</span></div>
<div class="line">        .rows=4, .cols=3,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// xpos and ypos</span></div>
<div class="line">        .xpos=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1), .ypos=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a>-2),</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// width and height</span></div>
<div class="line">        .width=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(15), .height=0,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Content and label callback</span></div>
<div class="line">        .content_cb=cb_content, .label_cb=cb_label,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Style and table post creation callback</span></div>
<div class="line">        .style_cb=NULL, .post_cb=NULL,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pointer to optional cell specifications</span></div>
<div class="line">        .cell_spec=NULL</div>
<div class="line">};</div>
<div class="ttc" id="ahpdftbl_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="hpdftbl_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdoc">Boolean truth value.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:47</div></div>
<div class="ttc" id="ahpdftbl_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="hpdftbl_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdoc">Boolean false value.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:52</div></div>
<div class="ttc" id="ahpdftbl_8h_html_ac8ef7b15650c2dc4e44a4c2b75359dc2"><div class="ttname"><a href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a></div><div class="ttdeci">#define A4PAGE_HEIGHT_CM</div><div class="ttdoc">Standard A4 paper height in cm.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:124</div></div>
<div class="ttc" id="ahpdftbl_8h_html_ad1b5b1c37e8832f507e65c595a7a2d00"><div class="ttname"><a href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a></div><div class="ttdeci">#define hpdftbl_cm2dpi(c)</div><div class="ttdoc">Convert cm to dots using the default resolution (72 DPI)</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:182</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>In the table definition we use the C99 feature of specifying the field name when defining data in a structure.</dd></dl>
<p>Then the actual API call is trivial to what we seen before and consists of only one line of code</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div>
<div class="line">create_table_ex13_1(HPDF_Doc pdf_doc, HPDF_Page pdf_page) {</div>
<div class="line">   <a class="code hl_function" href="hpdftbl_8c.html#ae606b38b3769692e75eba490964216c9">hpdftbl_stroke_from_data</a>(pdf_doc, pdf_page, &amp;tbl_spec, NULL);</div>
<div class="line">}</div>
</div><!-- fragment --><p >The result is as expected and shown in <b>Figure 13</b> but with much less code!</p>
<p ><img src="tut_ex13_1.png" alt="" class="inline" title="tut_ex13_1"/>    <br  />
 <em><b>Figure 13:</b></em> *Defining a table with a data structure <a class="el" href="tut_ex13_1_8c-example.html">tut_ex13_1.c</a>*</p>
<h1><a class="anchor" id="autotoc_md68"></a>
A second example of defining a table as data</h1>
<p >In the previous example we kept it simple didn't specify any format or content fór a table cell. Let us therefore create a slightly more complex example where we create a form which easily could be used to display data records from a DB.</p>
<p >The nice thing about separating layout and table structure from the data population in the callbacks is that this can almost be seen as a poor mans model-view-controller where the table structure is completely separate from the</p>
<p >A good way to start designing a table is to make a sketch on how it should look. Our goal is to crete the table structure as shown in the empty table in <b>Figure 14</b> below</p>
<p ><img src="table_design_1.png" alt="" class="inline" title="Rough Table design"/>    <br  />
 <em><b>Figure 14:</b></em> <em>Sketch of table to be designed</em></p>
<p >To get this layout we use a basic table with :</p>
<ol type="1">
<li>Five rows and four columns</li>
<li>No header and no title</li>
<li>We use labels and label grids</li>
</ol>
<p >To make it easier to see how to construct the table we can overlay the sketch with a grid shown in blue in <b>Figure 15</b>. As can be seen this is a basic 5x4 table where a number or cells span multiple columns.</p>
<p ><img src="table_design_2.png" alt="" class="inline" title="Rough Table design 2"/>    <br  />
 <em><b>Figure 15:</b></em> <em>Sketch of table to be designed with 5x4 table overlayed</em></p>
<p >To start we setup the table specification as in the previous example with necessary changes. We will also need to specify cell specifications this time and we assume those are available in an array of cell structures called <code>cell_specs</code>.</p>
<p >Before we specify the table structure we have one design decision to make. For the callbacks we can either use the table callback for all cells and check row and column to get the appropriate data or we can add individual callbacks for each cell. The first case has the advantage to only need one callback function (but lot of tests) and the second that each callback will be small and focused to get the data for that individual cell but we will need potentially one callback for each cell unless there are commonalities between the cells so one callback can serve multiple cells. Remember that we still get the row and column as arguments in the callback so we weill always know exactly for which cell the callback was made.</p>
<p >To keep the size of this example we will use the table callback method for content and specify the label directly in the cell specification. With this decision made we get the following definition cell specifications</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structhpdftbl__cell__spec.html">hpdftbl_cell_spec_t</a> cell_specs[] = {</div>
<div class="line">        {.<a class="code hl_variable" href="structhpdftbl__cell__spec.html#a97ab3b8ef2f074e3774c66099d7ec59b">row</a>=0, .col=0, .rowspan=1, .colspan=3,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Name:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=0, .col=3, .rowspan=1, .colspan=1,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Date:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=1, .col=0, .rowspan=1, .colspan=4,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Address:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=2, .col=0, .rowspan=1, .colspan=3,</div>
<div class="line">         .label=<span class="stringliteral">&quot;City:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=2, .col=3, .rowspan=1, .colspan=1,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Zip:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=3, .col=0, .rowspan=1, .colspan=4,</div>
<div class="line">         .label=<span class="stringliteral">&quot;E-mail:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=4, .col=0, .rowspan=1, .colspan=2,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Workphone:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">        {.row=4, .col=2, .rowspan=1, .colspan=2,</div>
<div class="line">         .label=<span class="stringliteral">&quot;Mobile:&quot;</span>,</div>
<div class="line">         .content_cb=NULL, .label_cb=NULL, .style_cb=NULL, .canvas_cb=NULL},</div>
<div class="line">         <a class="code hl_define" href="hpdftbl_8h.html#ae062b47275855810a63dbd85085f86a3">HPDFTBL_END_CELLSPECS</a> <span class="comment">// Sentinel to mark the end of</span></div>
<div class="line">};</div>
<div class="ttc" id="ahpdftbl_8h_html_ae062b47275855810a63dbd85085f86a3"><div class="ttname"><a href="hpdftbl_8h.html#ae062b47275855810a63dbd85085f86a3">HPDFTBL_END_CELLSPECS</a></div><div class="ttdeci">#define HPDFTBL_END_CELLSPECS</div><div class="ttdoc">Sentinel to mark the end of Cell Specifications for data driven table definition.</div><div class="ttdef"><b>Definition:</b> hpdftbl.h:164</div></div>
</div><!-- fragment --><p >As can be seen we need to have a end of cell specification sentinel since we could decide to provide details for one or more cells and there is no way for the library to know how many fields to read otherwise. There is even a convenience constant in the library <code>PDFTBL_END_CELLSPECS</code> that can be used as the last record.</p>
<p >The overall table specification is pretty much as before but with the added cell specifications.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structhpdftbl__spec.html">hpdftbl_spec_t</a> tbl_spec = {</div>
<div class="line">        <span class="comment">// Title and header flag</span></div>
<div class="line">        .<a class="code hl_variable" href="structhpdftbl__spec.html#af06d911bb9e05f491ef3da520d03796c">title</a>=NULL, .use_header=<a class="code hl_define" href="hpdftbl_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Label and labelgrid flags</span></div>
<div class="line">        .use_labels=<a class="code hl_define" href="hpdftbl_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, .use_labelgrid=<a class="code hl_define" href="hpdftbl_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Row and columns</span></div>
<div class="line">        .rows=5, .cols=4,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// xpos and ypos</span></div>
<div class="line">        .xpos=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(1), .ypos=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(<a class="code hl_define" href="hpdftbl_8h.html#ac8ef7b15650c2dc4e44a4c2b75359dc2">A4PAGE_HEIGHT_CM</a>-2),</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// width and height</span></div>
<div class="line">        .width=<a class="code hl_define" href="hpdftbl_8h.html#ad1b5b1c37e8832f507e65c595a7a2d00">hpdftbl_cm2dpi</a>(15), .height=0,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Content and label callback</span></div>
<div class="line">        .content_cb=cb_content, .label_cb=cb_label,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Style and table post creation callback</span></div>
<div class="line">        .style_cb=NULL, .post_cb=NULL,</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Pointer to optional cell specifications</span></div>
<div class="line">        .cell_spec=cell_specs</div>
<div class="line">};</div>
</div><!-- fragment --><p >When this is run (see <a class="el" href="tut_ex13_2_8c-example.html">tut_ex13_2.c</a>) it generates the following image, <b>Figure 13.2</b></p>
<p ><img src="tut_ex13_2.png" alt="" class="inline" title="tut_13_2.c"/>    <br  />
 <em><b>Figure 16:</b></em> <em>Specifying a table as data with cell specifications.</em></p>
<p >What remains is to write the proper table content callback that will populate the table. In a real life scenario his data will most likely come from a database but adding that in our example would bring to far. Instead we will just use some fake static dummmy data to illustrate the principle.</p>
<p >Since we have one callback for all cells we need to test from which cell the call come from. Here is a very important point to make. <b>The row and column number will be the row and cell columns in the original table before any column or row spans was applied.</b> In this example it means that for example the "Date" field (upper right) will have <code>row=0</code> and <code>col=3</code> and <b>not</b> <code>(0,1)</code>!!.</p>
<p >With this information we can write the following (dummy) table callback</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *</div>
<div class="line">cb_content(<span class="keywordtype">void</span> *tag, <span class="keywordtype">size_t</span> r, <span class="keywordtype">size_t</span> c) {</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">char</span> *cell_content[] =</div>
<div class="line">            {<span class="stringliteral">&quot;Mark Ericsen&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;12 Sep 2021&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;123 Downer Mews&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;London&quot;</span>, </div>
<div class="line">             <span class="stringliteral">&quot;NW2 HB3&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;mark.p.ericsen@myfinemail.com&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;+44734 354 184 56&quot;</span>,</div>
<div class="line">             <span class="stringliteral">&quot;+44771 938 137 11&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( 0==r &amp;&amp; 0==c) <span class="keywordflow">return</span> cell_content[0];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0==r &amp;&amp; 3==c) <span class="keywordflow">return</span> cell_content[1];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (1==r &amp;&amp; 0==c) <span class="keywordflow">return</span> cell_content[2];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (2==r &amp;&amp; 0==c) <span class="keywordflow">return</span> cell_content[3];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (2==r &amp;&amp; 3==c) <span class="keywordflow">return</span> cell_content[4];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (3==r &amp;&amp; 0==c) <span class="keywordflow">return</span> cell_content[5];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (4==r &amp;&amp; 0==c) <span class="keywordflow">return</span> cell_content[6];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (4==r &amp;&amp; 2==c) <span class="keywordflow">return</span> cell_content[7];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment --><p >and we get the (expected) result as shown in <b>Figure 17</b> below.</p>
<p ><img src="tut_ex13_2_data.png" alt="" class="inline" title="tut_13_2.c"/>    <br  />
 <em><b>Figure 17:</b></em> <em>Specifying a table as data with cell specifications and "dummy" data.</em></p>
<p >The alternative of specifying individual callback for each cell would then require that each cell have a callback provided or perhaps even a mix with both a general table callback and selected cell callbacks.</p>
<p >The priority is such that a cell callback will always override a table callback. In the above example the callback for the name field could as an example be</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *</div>
<div class="line">cb_content_name(<span class="keywordtype">void</span> *tag, <span class="keywordtype">size_t</span> r, <span class="keywordtype">size_t</span> c) {</div>
<div class="line">     <span class="keyword">static</span> <span class="keywordtype">char</span> *cell_content = <span class="stringliteral">&quot;Mark Ericsen&quot;</span>;</div>
<div class="line">     <span class="keywordflow">return</span> cell_content;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed May 4 2022 00:18:22 for libhpdftbl by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
